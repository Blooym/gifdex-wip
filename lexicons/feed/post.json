{
  "lexicon": 1,
  "id": "net.gifdex.feed.post",
  "defs": {
    "main": {
      "type": "record",
      "key": "any",
      "record": {
        "type": "object",
        "required": ["title", "media", "createdAt"],
        "properties": {
          "title": {
            "type": "string",
            "maxGraphemes": 80,
            "description": "The title of the post."
          },
          "media": {
            "type": "ref",
            "ref": "#postMedia"
          },
          "tags": {
            "type": "array",
            "description": "Tags that apply to the content of the post, used for discoverability.",
            "items": {
              "type": "string",
              "maxGraphemes": 40
            },
            "maxLength": 5
          },
          "createdAt": {
            "type": "string",
            "format": "datetime",
            "description": "Client-declared timestamp when this post was originally created."
          }
        }
      }
    },
    "postMedia": {
      "type": "object",
      "description": "Media blob with optional alt text",
      "required": ["blob"],
      "properties": {
        "alt": {
          "type": "string",
          "maxGraphemes": 5000
        },
        "blob": {
          "type": "blob",
          "accept": ["image/webp"],
          "maxSize": 5000000
        }
      }
    }
  }
}
